function Auth(){var t=this;t.MaskWrapper=$(".mask-wrapper"),t.scrollWrapper=$(".scroll-wrapper"),t.smsCaptcha=$(".sendmsg-btn")}function User(){}Auth.prototype.showEvent=function(){this.MaskWrapper.show()},Auth.prototype.hideEvent=function(){this.MaskWrapper.hide()},Auth.prototype.listenShowHideEvent=function(){var t=this;$(".signin-btn").click(function(){t.scrollWrapper.css({left:0}),t.showEvent()}),$(".signup-btn").click(function(){t.scrollWrapper.css({left:-400}),t.showEvent()}),$(".close-btn").click(function(){t.hideEvent()})},Auth.prototype.listenScrollEvent=function(){var e=this;$(".switch").click(function(){var t=e.scrollWrapper.css("left");(t=$(parseInt(t)))[0]<0?e.scrollWrapper.animate({left:0},200):e.scrollWrapper.animate({left:"-400px"},200)})},Auth.prototype.listenSigninEvent=function(){var s=this,t=$(".signin-group"),a=t.find("input[name='telephone']"),i=t.find("input[name='password']"),o=t.find("input[name='remember']");t.find(".submit-btn").click(function(){var t=a.val(),e=i.val(),n=o.prop("checked");xfzajax.post({url:"/user/login/",data:{telephone:t,password:e,remember:n?1:0},success:function(){s.hideEvent(),window.location.reload()}})})},Auth.prototype.listenSignupEvent=function(){var m=$(".signup-group");m.find("input[class='submit-btn']").click(function(t){t.preventDefault();var e=m.find("input[name='telephone']"),n=m.find("input[name='username']"),s=m.find("input[name='img_code']"),a=m.find("input[name='password1']"),i=m.find("input[name='password2']"),o=m.find("input[name='msg_code']"),r=e.val(),c=n.val(),p=s.val(),u=a.val(),l=i.val(),h=o.val();xfzajax.post({url:"/user/register/",data:{telephone:r,username:c,img_captcha:p,password1:u,password2:l,sms_captcha:h},success:function(){window.location.reload()}})})},Auth.prototype.listenImgcaptchaEvent=function(){var t=$(".code_pic"),e=$(".img_captcha"),n=$(".change");t.click(function(){e.attr("src","/user/img_captcha/?random="+Math.random())}),t.hover(function(){n.show()},function(){n.hide()})},Auth.prototype.listenSendmsgEvent=function(){var e=this,n=$(".signup-group input[name='telephone']");e.smsCaptcha.click(function(){var t=n.val();t?xfzajax.get({url:"/user/sms_captcha/",data:{telephone:t},success:function(t){e.smsSuccessEvent()}}):messageBox.showInfo("请输入手机号码！")})},Auth.prototype.smsSuccessEvent=function(){var t=this;messageBox.showSuccess("短信验证码发送成功！"),t.smsCaptcha.addClass("disabled");var e=10;t.smsCaptcha.unbind("click");var n=setInterval(function(){t.smsCaptcha.css("line-height","normal"),t.smsCaptcha.text("已发送，"+e+"s后可重新发送！"),(e-=1)<=0&&(clearInterval(n),t.smsCaptcha.removeClass("disabled"),t.smsCaptcha.css("line-height","40px"),t.smsCaptcha.text("发送验证码"),t.listenSendmsgEvent())},1e3)},Auth.prototype.run=function(){var t=this;t.listenShowHideEvent(),t.listenScrollEvent(),t.listenSigninEvent(),t.listenImgcaptchaEvent(),t.listenSendmsgEvent(),t.listenSignupEvent()},User.prototype.listenHoverEvent=function(){var t=$(".auth-box"),e=$(".user-more-box");t.hover(function(){e.show()},function(){e.hide()})},User.prototype.run=function(){this.listenHoverEvent()},$(function(){(new Auth).run(),(new User).run()}),$(function(){template&&(template.defaults.imports.timeSince=function(t){var e=new Date(t),n=e.getTime(),s=((new Date).getTime()-n)/1e3;return s<60?"刚刚":60<=s&&s<3600?(minutes=parseInt(s/60),minutes+"分钟前"):3600<=s&&s<86400?(hours=parseInt(s/60/60),hours+"小时前"):86400<=s&&s<2592e3?(days=parseInt(s/60/60/24),days+"天前"):e.getFullYear()+"/"+e.getMonth()+"/"+e.getDay()+" "+e.getHours()+":"+e.getMinutes()})});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImF1dGguanMiXSwibmFtZXMiOlsiQXV0aCIsInNlbGYiLCJ0aGlzIiwiTWFza1dyYXBwZXIiLCIkIiwic2Nyb2xsV3JhcHBlciIsInNtc0NhcHRjaGEiLCJVc2VyIiwicHJvdG90eXBlIiwic2hvd0V2ZW50Iiwic2hvdyIsImhpZGVFdmVudCIsImhpZGUiLCJsaXN0ZW5TaG93SGlkZUV2ZW50IiwiY2xpY2siLCJjc3MiLCJsZWZ0IiwibGlzdGVuU2Nyb2xsRXZlbnQiLCJjdXJyZW50TGVmdCIsInBhcnNlSW50IiwiYW5pbWF0ZSIsImxpc3RlblNpZ25pbkV2ZW50Iiwic2lnbmluR3JvdXAiLCJ0ZWxlcGhvbmVJbnB1dCIsImZpbmQiLCJwYXNzd29yZElucHV0IiwicmVtZW1iZXJJbnB1dCIsInRlbGVwaG9uZSIsInZhbCIsInBhc3N3b3JkIiwicmVtZW1iZXIiLCJwcm9wIiwieGZ6YWpheCIsInBvc3QiLCJ1cmwiLCJkYXRhIiwic3VjY2VzcyIsIndpbmRvdyIsImxvY2F0aW9uIiwicmVsb2FkIiwibGlzdGVuU2lnbnVwRXZlbnQiLCJzaWdudXBHcm91cCIsImV2ZW50IiwicHJldmVudERlZmF1bHQiLCJ1c2VybmFtZUlucHV0IiwiaW1nQ2FwdGNoYUlucHV0IiwicGFzc3dvcmQxSW5wdXQiLCJwYXNzd29yZDJJbnB1dCIsInNtc0NhcHRjaGFJbnB1dCIsInVzZXJuYW1lIiwiaW1nX2NhcHRjaGEiLCJwYXNzd29yZDEiLCJwYXNzd29yZDIiLCJzbXNfY2FwdGNoYSIsImxpc3RlbkltZ2NhcHRjaGFFdmVudCIsImNvZGVQaWMiLCJpbWdDYXB0Y2hhIiwiY2hhbmdlIiwiYXR0ciIsIk1hdGgiLCJyYW5kb20iLCJob3ZlciIsImxpc3RlblNlbmRtc2dFdmVudCIsImdldCIsInJlc3VsdCIsInNtc1N1Y2Nlc3NFdmVudCIsIm1lc3NhZ2VCb3giLCJzaG93SW5mbyIsInNob3dTdWNjZXNzIiwiYWRkQ2xhc3MiLCJjb3VudCIsInVuYmluZCIsInRpbWVyIiwic2V0SW50ZXJ2YWwiLCJ0ZXh0IiwiY2xlYXJJbnRlcnZhbCIsInJlbW92ZUNsYXNzIiwicnVuIiwibGlzdGVuSG92ZXJFdmVudCIsImF1dGhCb3giLCJ1c2VyTW9yZUJveCIsInRlbXBsYXRlIiwiZGVmYXVsdHMiLCJpbXBvcnRzIiwidGltZVNpbmNlIiwiZGF0ZVZhbHVlIiwiZGF0ZSIsIkRhdGUiLCJkYXRldHMiLCJnZXRUaW1lIiwidGltZXN0YW1wIiwibWludXRlcyIsImhvdXJzIiwiZGF5cyIsImdldEZ1bGxZZWFyIiwiZ2V0TW9udGgiLCJnZXREYXkiLCJnZXRIb3VycyIsImdldE1pbnV0ZXMiXSwibWFwcGluZ3MiOiJBQTJCQSxTQUFTQSxPQUNMLElBQUlDLEVBQU9DLEtBQ1hELEVBQUtFLFlBQWNDLEVBQUUsaUJBQ3JCSCxFQUFLSSxjQUFnQkQsRUFBRSxtQkFDdkJILEVBQUtLLFdBQWFGLEVBQUUsZ0JBNkt4QixTQUFTRyxRQTFLVFAsS0FBS1EsVUFBVUMsVUFBWSxXQUNaUCxLQUNOQyxZQUFZTyxRQUdyQlYsS0FBS1EsVUFBVUcsVUFBWSxXQUNaVCxLQUNOQyxZQUFZUyxRQUdyQlosS0FBS1EsVUFBVUssb0JBQXNCLFdBQ2pDLElBQUlaLEVBQU9DLEtBQ1hFLEVBQUUsZUFBZVUsTUFBTSxXQUNwQmIsRUFBS0ksY0FBY1UsSUFBSSxDQUFDQyxLQUFRLElBQ2hDZixFQUFLUSxjQUVUTCxFQUFFLGVBQWVVLE1BQU0sV0FDbkJiLEVBQUtJLGNBQWNVLElBQUksQ0FBQ0MsTUFBUyxNQUNqQ2YsRUFBS1EsY0FFVEwsRUFBRSxjQUFjVSxNQUFNLFdBQ2xCYixFQUFLVSxlQUlaWCxLQUFLUSxVQUFVUyxrQkFBb0IsV0FDL0IsSUFBSWhCLEVBQU9DLEtBQ1hFLEVBQUUsV0FBV1UsTUFBTSxXQUNmLElBQUlJLEVBQWNqQixFQUFLSSxjQUFjVSxJQUFJLFNBQ3pDRyxFQUFjZCxFQUFFZSxTQUFTRCxLQUNWLEdBQUssRUFDaEJqQixFQUFLSSxjQUFjZSxRQUFRLENBQUNKLEtBQVEsR0FBSSxLQUd4Q2YsRUFBS0ksY0FBY2UsUUFBUSxDQUFDSixLQUFRLFVBQVcsUUFLM0RoQixLQUFLUSxVQUFVYSxrQkFBb0IsV0FDL0IsSUFBSXBCLEVBQU9DLEtBQ1BvQixFQUFjbEIsRUFBRSxpQkFDaEJtQixFQUFpQkQsRUFBWUUsS0FBSywyQkFDbENDLEVBQWdCSCxFQUFZRSxLQUFLLDBCQUNqQ0UsRUFBZ0JKLEVBQVlFLEtBQUssMEJBRXJCRixFQUFZRSxLQUFLLGVBQ3ZCVixNQUFNLFdBQ1osSUFBSWEsRUFBWUosRUFBZUssTUFDM0JDLEVBQVdKLEVBQWNHLE1BQ3pCRSxFQUFXSixFQUFjSyxLQUFLLFdBRWxDQyxRQUFRQyxLQUFLLENBQ1RDLElBQU8sZUFDUEMsS0FBUSxDQUNKUixVQUFhQSxFQUNiRSxTQUFZQSxFQUNaQyxTQUFZQSxFQUFTLEVBQUUsR0FFM0JNLFFBQVcsV0FDUG5DLEVBQUtVLFlBQ0wwQixPQUFPQyxTQUFTQyxlQU1oQ3ZDLEtBQUtRLFVBQVVnQyxrQkFBb0IsV0FDL0IsSUFBSUMsRUFBY3JDLEVBQUUsaUJBQ0pxQyxFQUFZakIsS0FBSyw2QkFDdkJWLE1BQU0sU0FBVTRCLEdBQ3RCQSxFQUFNQyxpQkFDTixJQUFJcEIsRUFBaUJrQixFQUFZakIsS0FBSywyQkFDbENvQixFQUFnQkgsRUFBWWpCLEtBQUssMEJBQ2pDcUIsRUFBa0JKLEVBQVlqQixLQUFLLDBCQUNuQ3NCLEVBQWlCTCxFQUFZakIsS0FBSywyQkFDbEN1QixFQUFpQk4sRUFBWWpCLEtBQUssMkJBQ2xDd0IsRUFBa0JQLEVBQVlqQixLQUFLLDBCQUNuQ0csRUFBWUosRUFBZUssTUFDM0JxQixFQUFXTCxFQUFjaEIsTUFDekJzQixFQUFjTCxFQUFnQmpCLE1BQzlCdUIsRUFBWUwsRUFBZWxCLE1BQzNCd0IsRUFBWUwsRUFBZW5CLE1BQzNCeUIsRUFBY0wsRUFBZ0JwQixNQUVsQ0ksUUFBUUMsS0FBSyxDQUNUQyxJQUFPLGtCQUNQQyxLQUFRLENBQ0pSLFVBQWFBLEVBQ2JzQixTQUFZQSxFQUNaQyxZQUFlQSxFQUNmQyxVQUFhQSxFQUNiQyxVQUFhQSxFQUNiQyxZQUFlQSxHQUVuQmpCLFFBQVcsV0FDUEMsT0FBT0MsU0FBU0MsZUFNaEN2QyxLQUFLUSxVQUFVOEMsc0JBQXdCLFdBQ25DLElBQUlDLEVBQVVuRCxFQUFFLGFBQ1pvRCxFQUFhcEQsRUFBRSxnQkFDZnFELEVBQVNyRCxFQUFFLFdBQ2ZtRCxFQUFRekMsTUFBTSxXQUNWMEMsRUFBV0UsS0FBSyxNQUFPLDZCQUFnQ0MsS0FBS0MsWUFFaEVMLEVBQVFNLE1BQU0sV0FDVkosRUFBTy9DLFFBQ1IsV0FDQytDLEVBQU83QyxVQUlmWixLQUFLUSxVQUFVc0QsbUJBQXFCLFdBQ2hDLElBQUk3RCxFQUFPQyxLQUNQcUIsRUFBaUJuQixFQUFFLHlDQUN2QkgsRUFBS0ssV0FBV1EsTUFBTSxXQUNsQixJQUFJYSxFQUFZSixFQUFlSyxNQUMzQkQsRUFJQUssUUFBUStCLElBQUksQ0FDUjdCLElBQU8scUJBQ1BDLEtBQVEsQ0FDSlIsVUFBYUEsR0FFakJTLFFBQVcsU0FBVTRCLEdBQ2pCL0QsRUFBS2dFLHFCQVRiQyxXQUFXQyxTQUFTLGVBZ0JoQ25FLEtBQUtRLFVBQVV5RCxnQkFBa0IsV0FDN0IsSUFBSWhFLEVBQU9DLEtBQ1hnRSxXQUFXRSxZQUFZLGNBQ3ZCbkUsRUFBS0ssV0FBVytELFNBQVMsWUFDekIsSUFBSUMsRUFBUSxHQUNackUsRUFBS0ssV0FBV2lFLE9BQU8sU0FDdkIsSUFBSUMsRUFBUUMsWUFBWSxXQUNwQnhFLEVBQUtLLFdBQVdTLElBQUksY0FBZSxVQUNuQ2QsRUFBS0ssV0FBV29FLEtBQUssT0FBT0osRUFBTSxhQUNsQ0EsR0FBUyxJQUNHLElBQ1JLLGNBQWNILEdBQ2R2RSxFQUFLSyxXQUFXc0UsWUFBWSxZQUM1QjNFLEVBQUtLLFdBQVdTLElBQUksY0FBZSxRQUNuQ2QsRUFBS0ssV0FBV29FLEtBQUssU0FDckJ6RSxFQUFLNkQsdUJBRVYsTUFHUDlELEtBQUtRLFVBQVVxRSxJQUFNLFdBQ2pCLElBQUk1RSxFQUFPQyxLQUNYRCxFQUFLWSxzQkFDTFosRUFBS2dCLG9CQUNMaEIsRUFBS29CLG9CQUNMcEIsRUFBS3FELHdCQUNMckQsRUFBSzZELHFCQUNMN0QsRUFBS3VDLHFCQVNUakMsS0FBS0MsVUFBVXNFLGlCQUFtQixXQUM5QixJQUFJQyxFQUFVM0UsRUFBRSxhQUNaNEUsRUFBYzVFLEVBQUUsa0JBQ3BCMkUsRUFBUWxCLE1BQU0sV0FDVm1CLEVBQVl0RSxRQUNiLFdBQ0NzRSxFQUFZcEUsVUFJcEJMLEtBQUtDLFVBQVVxRSxJQUFNLFdBQ1IzRSxLQUNONEUsb0JBSVAxRSxFQUFFLFlBQ2EsSUFBSUosTUFDVjZFLE9BQ00sSUFBSXRFLE1BQ1ZzRSxRQUlUekUsRUFBRSxXQUNLNkUsV0FDQ0EsU0FBU0MsU0FBU0MsUUFBUUMsVUFBWSxTQUFVQyxHQUNoRCxJQUFJQyxFQUFPLElBQUlDLEtBQUtGLEdBQ2hCRyxFQUFTRixFQUFLRyxVQUVkQyxJQURRLElBQUtILE1BQVFFLFVBQ0FELEdBQVEsSUFDakMsT0FBR0UsRUFBWSxHQUNKLEtBRUgsSUFBTUEsR0FBYUEsRUFBWSxNQUNuQ0MsUUFBVXhFLFNBQVN1RSxFQUFVLElBQ3RCQyxRQUFRLE9BRVgsTUFBU0QsR0FBYUEsRUFBWSxPQUN0Q0UsTUFBUXpFLFNBQVN1RSxFQUFVLEdBQUcsSUFDdkJFLE1BQU0sT0FFUixPQUFZRixHQUFhQSxFQUFZLFFBQzFDRyxLQUFPMUUsU0FBU3VFLEVBQVUsR0FBRyxHQUFHLElBQ3pCRyxLQUFLLE1BR0RQLEVBQUtRLGNBS0osSUFKQVIsRUFBS1MsV0FJSyxJQUhaVCxFQUFLVSxTQUdlLElBRm5CVixFQUFLVyxXQUV1QixJQUQxQlgsRUFBS1kiLCJmaWxlIjoiYXV0aC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyAvL+eCueWHu+eZu+W9leaMiemSru+8jOW8ueWHuuaooeaAgeWvueivneahhlxyXG4vLyAkKGZ1bmN0aW9uICgpIHtcclxuLy8gICAgICQoJyNidG4nKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbi8vICAgICAgICAgJCgnLnNjcm9sbC13cmFwcGVyJykuY3NzKHsnbGVmdCc6IDB9KTtcclxuLy8gICAgICAgICAkKCcubWFzay13cmFwcGVyJykuc2hvdygpO1xyXG4vLyAgICAgfSk7XHJcbi8vICAgICAkKCcuY2xvc2UtYnRuJykuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4vLyAgICAgICAgICQoJy5tYXNrLXdyYXBwZXInKS5oaWRlKCk7XHJcbi8vICAgICB9KTtcclxuLy8gfSk7XHJcblxyXG4vLyAvL+WIh+aNoumAieaLqeazqOWGjOWSjOeZu+W9lVxyXG4vLyAkKGZ1bmN0aW9uICgpIHtcclxuLy8gICAgICQoJy5zd2l0Y2gnKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbi8vICAgICAgICAgdmFyIHNjcm9sbFdyYXBwZXIgPSAkKCcuc2Nyb2xsLXdyYXBwZXInKTtcclxuLy8gICAgICAgICB2YXIgY3VycmVudExlZnQgPSBzY3JvbGxXcmFwcGVyLmNzcygnbGVmdCcpO1xyXG4vLyAgICAgICAgIGN1cnJlbnRMZWZ0ID0gJChwYXJzZUludChjdXJyZW50TGVmdCkpOyAgIC8v6L+U5Zue5LiA5LiqQXJyYXlcclxuLy8gICAgICAgICBpZihjdXJyZW50TGVmdFswXSA8IDApe1xyXG4vLyAgICAgICAgICAgICBzY3JvbGxXcmFwcGVyLmFuaW1hdGUoe1wibGVmdFwiOiAwfSwgMjAwKVxyXG4vLyAgICAgICAgIH1cclxuLy8gICAgICAgICBlbHNle1xyXG4vLyAgICAgICAgICAgICBzY3JvbGxXcmFwcGVyLmFuaW1hdGUoe1wibGVmdFwiOiBcIi00MDBweFwifSwgMjAwKVxyXG4vLyAgICAgICAgIH1cclxuLy8gICAgIH0pO1xyXG4vLyB9KTtcclxuXHJcbi8vMS7nmbvlvZXlvLnnqpdcclxuZnVuY3Rpb24gQXV0aCgpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHNlbGYuTWFza1dyYXBwZXIgPSAkKCcubWFzay13cmFwcGVyJyk7XHJcbiAgICBzZWxmLnNjcm9sbFdyYXBwZXIgPSAkKCcuc2Nyb2xsLXdyYXBwZXInKTtcclxuICAgIHNlbGYuc21zQ2FwdGNoYSA9ICQoJy5zZW5kbXNnLWJ0bicpO1xyXG59XHJcblxyXG5BdXRoLnByb3RvdHlwZS5zaG93RXZlbnQgPSBmdW5jdGlvbigpe1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgc2VsZi5NYXNrV3JhcHBlci5zaG93KCk7XHJcbn07XHJcblxyXG5BdXRoLnByb3RvdHlwZS5oaWRlRXZlbnQgPSBmdW5jdGlvbigpe1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgc2VsZi5NYXNrV3JhcHBlci5oaWRlKCk7XHJcbn07XHJcblxyXG5BdXRoLnByb3RvdHlwZS5saXN0ZW5TaG93SGlkZUV2ZW50ID0gZnVuY3Rpb24oKXtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgICQoJy5zaWduaW4tYnRuJykuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgc2VsZi5zY3JvbGxXcmFwcGVyLmNzcyh7J2xlZnQnOiAwfSk7XHJcbiAgICAgICBzZWxmLnNob3dFdmVudCgpO1xyXG4gICB9KTtcclxuICAgJCgnLnNpZ251cC1idG4nKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICBzZWxmLnNjcm9sbFdyYXBwZXIuY3NzKHsnbGVmdCc6IC00MDB9KTtcclxuICAgICAgIHNlbGYuc2hvd0V2ZW50KCk7XHJcbiAgIH0pO1xyXG4gICAkKCcuY2xvc2UtYnRuJykuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgc2VsZi5oaWRlRXZlbnQoKTtcclxuICAgfSlcclxufTtcclxuXHJcbkF1dGgucHJvdG90eXBlLmxpc3RlblNjcm9sbEV2ZW50ID0gZnVuY3Rpb24oKXtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgICQoJy5zd2l0Y2gnKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGN1cnJlbnRMZWZ0ID0gc2VsZi5zY3JvbGxXcmFwcGVyLmNzcygnbGVmdCcpO1xyXG4gICAgICAgIGN1cnJlbnRMZWZ0ID0gJChwYXJzZUludChjdXJyZW50TGVmdCkpOyAgIC8v6L+U5Zue5LiA5LiqQXJyYXlcclxuICAgICAgICBpZihjdXJyZW50TGVmdFswXSA8IDApe1xyXG4gICAgICAgICAgICBzZWxmLnNjcm9sbFdyYXBwZXIuYW5pbWF0ZSh7XCJsZWZ0XCI6IDB9LCAyMDApXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2V7XHJcbiAgICAgICAgICAgIHNlbGYuc2Nyb2xsV3JhcHBlci5hbmltYXRlKHtcImxlZnRcIjogXCItNDAwcHhcIn0sIDIwMClcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufTtcclxuXHJcbkF1dGgucHJvdG90eXBlLmxpc3RlblNpZ25pbkV2ZW50ID0gZnVuY3Rpb24oKXtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHZhciBzaWduaW5Hcm91cCA9ICQoJy5zaWduaW4tZ3JvdXAnKTtcclxuICAgIHZhciB0ZWxlcGhvbmVJbnB1dCA9IHNpZ25pbkdyb3VwLmZpbmQoXCJpbnB1dFtuYW1lPSd0ZWxlcGhvbmUnXVwiKTtcclxuICAgIHZhciBwYXNzd29yZElucHV0ID0gc2lnbmluR3JvdXAuZmluZChcImlucHV0W25hbWU9J3Bhc3N3b3JkJ11cIik7XHJcbiAgICB2YXIgcmVtZW1iZXJJbnB1dCA9IHNpZ25pbkdyb3VwLmZpbmQoXCJpbnB1dFtuYW1lPSdyZW1lbWJlciddXCIpO1xyXG5cclxuICAgIHZhciBzdWJtaXRCdG4gPSBzaWduaW5Hcm91cC5maW5kKFwiLnN1Ym1pdC1idG5cIik7XHJcbiAgICBzdWJtaXRCdG4uY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciB0ZWxlcGhvbmUgPSB0ZWxlcGhvbmVJbnB1dC52YWwoKTtcclxuICAgICAgICB2YXIgcGFzc3dvcmQgPSBwYXNzd29yZElucHV0LnZhbCgpO1xyXG4gICAgICAgIHZhciByZW1lbWJlciA9IHJlbWVtYmVySW5wdXQucHJvcChcImNoZWNrZWRcIik7XHJcblxyXG4gICAgICAgIHhmemFqYXgucG9zdCh7XHJcbiAgICAgICAgICAgICd1cmwnOiAnL3VzZXIvbG9naW4vJyxcclxuICAgICAgICAgICAgJ2RhdGEnOiB7XHJcbiAgICAgICAgICAgICAgICAndGVsZXBob25lJzogdGVsZXBob25lLFxyXG4gICAgICAgICAgICAgICAgJ3Bhc3N3b3JkJzogcGFzc3dvcmQsXHJcbiAgICAgICAgICAgICAgICAncmVtZW1iZXInOiByZW1lbWJlcj8xOjBcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgJ3N1Y2Nlc3MnOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBzZWxmLmhpZGVFdmVudCgpO1xyXG4gICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgIH0pXHJcbn07XHJcblxyXG5BdXRoLnByb3RvdHlwZS5saXN0ZW5TaWdudXBFdmVudCA9IGZ1bmN0aW9uKCl7XHJcbiAgICB2YXIgc2lnbnVwR3JvdXAgPSAkKCcuc2lnbnVwLWdyb3VwJyk7XHJcbiAgICB2YXIgc3VibWl0QnRuID0gc2lnbnVwR3JvdXAuZmluZChcImlucHV0W2NsYXNzPSdzdWJtaXQtYnRuJ11cIik7XHJcbiAgICBzdWJtaXRCdG4uY2xpY2soZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsgLy8g6Zi75q2i5pS+5ZyoZm9ybeS4reeahHN1Ym1pdOaMiemSrueahOm7mOiupOaPkOS6pOihqOWNleihjOS4ulxyXG4gICAgICAgIHZhciB0ZWxlcGhvbmVJbnB1dCA9IHNpZ251cEdyb3VwLmZpbmQoXCJpbnB1dFtuYW1lPSd0ZWxlcGhvbmUnXVwiKTtcclxuICAgICAgICB2YXIgdXNlcm5hbWVJbnB1dCA9IHNpZ251cEdyb3VwLmZpbmQoXCJpbnB1dFtuYW1lPSd1c2VybmFtZSddXCIpO1xyXG4gICAgICAgIHZhciBpbWdDYXB0Y2hhSW5wdXQgPSBzaWdudXBHcm91cC5maW5kKFwiaW5wdXRbbmFtZT0naW1nX2NvZGUnXVwiKTtcclxuICAgICAgICB2YXIgcGFzc3dvcmQxSW5wdXQgPSBzaWdudXBHcm91cC5maW5kKFwiaW5wdXRbbmFtZT0ncGFzc3dvcmQxJ11cIik7XHJcbiAgICAgICAgdmFyIHBhc3N3b3JkMklucHV0ID0gc2lnbnVwR3JvdXAuZmluZChcImlucHV0W25hbWU9J3Bhc3N3b3JkMiddXCIpO1xyXG4gICAgICAgIHZhciBzbXNDYXB0Y2hhSW5wdXQgPSBzaWdudXBHcm91cC5maW5kKFwiaW5wdXRbbmFtZT0nbXNnX2NvZGUnXVwiKTtcclxuICAgICAgICB2YXIgdGVsZXBob25lID0gdGVsZXBob25lSW5wdXQudmFsKCk7XHJcbiAgICAgICAgdmFyIHVzZXJuYW1lID0gdXNlcm5hbWVJbnB1dC52YWwoKTtcclxuICAgICAgICB2YXIgaW1nX2NhcHRjaGEgPSBpbWdDYXB0Y2hhSW5wdXQudmFsKCk7XHJcbiAgICAgICAgdmFyIHBhc3N3b3JkMSA9IHBhc3N3b3JkMUlucHV0LnZhbCgpO1xyXG4gICAgICAgIHZhciBwYXNzd29yZDIgPSBwYXNzd29yZDJJbnB1dC52YWwoKTtcclxuICAgICAgICB2YXIgc21zX2NhcHRjaGEgPSBzbXNDYXB0Y2hhSW5wdXQudmFsKCk7XHJcblxyXG4gICAgICAgIHhmemFqYXgucG9zdCh7XHJcbiAgICAgICAgICAgICd1cmwnOiAnL3VzZXIvcmVnaXN0ZXIvJyxcclxuICAgICAgICAgICAgJ2RhdGEnOiB7XHJcbiAgICAgICAgICAgICAgICAndGVsZXBob25lJzogdGVsZXBob25lLFxyXG4gICAgICAgICAgICAgICAgJ3VzZXJuYW1lJzogdXNlcm5hbWUsXHJcbiAgICAgICAgICAgICAgICAnaW1nX2NhcHRjaGEnOiBpbWdfY2FwdGNoYSxcclxuICAgICAgICAgICAgICAgICdwYXNzd29yZDEnOiBwYXNzd29yZDEsXHJcbiAgICAgICAgICAgICAgICAncGFzc3dvcmQyJzogcGFzc3dvcmQyLFxyXG4gICAgICAgICAgICAgICAgJ3Ntc19jYXB0Y2hhJzogc21zX2NhcHRjaGFcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgJ3N1Y2Nlc3MnOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgfSlcclxufTtcclxuXHJcbkF1dGgucHJvdG90eXBlLmxpc3RlbkltZ2NhcHRjaGFFdmVudCA9IGZ1bmN0aW9uKCl7XHJcbiAgICB2YXIgY29kZVBpYyA9ICQoJy5jb2RlX3BpYycpO1xyXG4gICAgdmFyIGltZ0NhcHRjaGEgPSAkKCcuaW1nX2NhcHRjaGEnKTtcclxuICAgIHZhciBjaGFuZ2UgPSAkKCcuY2hhbmdlJyk7XHJcbiAgICBjb2RlUGljLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpbWdDYXB0Y2hhLmF0dHIoXCJzcmNcIiwgXCIvdXNlci9pbWdfY2FwdGNoYS9cIitcIj9yYW5kb209XCIrTWF0aC5yYW5kb20oKSlcclxuICAgIH0pO1xyXG4gICAgY29kZVBpYy5ob3ZlcihmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgY2hhbmdlLnNob3coKTtcclxuICAgIH0sIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBjaGFuZ2UuaGlkZSgpO1xyXG4gICAgfSlcclxufTtcclxuXHJcbkF1dGgucHJvdG90eXBlLmxpc3RlblNlbmRtc2dFdmVudCA9IGZ1bmN0aW9uKCl7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICB2YXIgdGVsZXBob25lSW5wdXQgPSAkKFwiLnNpZ251cC1ncm91cCBpbnB1dFtuYW1lPSd0ZWxlcGhvbmUnXVwiKTtcclxuICAgIHNlbGYuc21zQ2FwdGNoYS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIHRlbGVwaG9uZSA9IHRlbGVwaG9uZUlucHV0LnZhbCgpO1xyXG4gICAgICAgIGlmKCF0ZWxlcGhvbmUpe1xyXG4gICAgICAgICAgICBtZXNzYWdlQm94LnNob3dJbmZvKCfor7fovpPlhaXmiYvmnLrlj7fnoIHvvIEnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZXtcclxuICAgICAgICAgICAgeGZ6YWpheC5nZXQoe1xyXG4gICAgICAgICAgICAgICAgJ3VybCc6ICcvdXNlci9zbXNfY2FwdGNoYS8nLFxyXG4gICAgICAgICAgICAgICAgJ2RhdGEnOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgJ3RlbGVwaG9uZSc6IHRlbGVwaG9uZVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICdzdWNjZXNzJzogZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuc21zU3VjY2Vzc0V2ZW50KCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfVxyXG4gICAgfSlcclxufTtcclxuXHJcbkF1dGgucHJvdG90eXBlLnNtc1N1Y2Nlc3NFdmVudCA9IGZ1bmN0aW9uKCl7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICBtZXNzYWdlQm94LnNob3dTdWNjZXNzKCfnn63kv6Hpqozor4HnoIHlj5HpgIHmiJDlip/vvIEnKTtcclxuICAgIHNlbGYuc21zQ2FwdGNoYS5hZGRDbGFzcygnZGlzYWJsZWQnKTtcclxuICAgIHZhciBjb3VudCA9IDEwO1xyXG4gICAgc2VsZi5zbXNDYXB0Y2hhLnVuYmluZCgnY2xpY2snKTsgICAvL+W3suWPkemAgeeKtuaAgeS4i++8jOWPlua2iOeCueWHu+S6i+S7tlxyXG4gICAgdmFyIHRpbWVyID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHNlbGYuc21zQ2FwdGNoYS5jc3MoJ2xpbmUtaGVpZ2h0JywgJ25vcm1hbCcpOyAgIC8v6YG/5YWN5Yia54K55Ye75pe277yM5paH5a2X5YiH5o2i5Zug6KGM6auY5Y+Y5YyW6ICM5byV6LW355qE5pi+56S65LiN5bGF5LitXHJcbiAgICAgICAgc2VsZi5zbXNDYXB0Y2hhLnRleHQoXCLlt7Llj5HpgIHvvIxcIitjb3VudCtcInPlkI7lj6/ph43mlrDlj5HpgIHvvIFcIik7XHJcbiAgICAgICAgY291bnQgLT0gMTtcclxuICAgICAgICBpZihjb3VudCA8PSAwKXtcclxuICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aW1lcik7XHJcbiAgICAgICAgICAgIHNlbGYuc21zQ2FwdGNoYS5yZW1vdmVDbGFzcygnZGlzYWJsZWQnKTtcclxuICAgICAgICAgICAgc2VsZi5zbXNDYXB0Y2hhLmNzcygnbGluZS1oZWlnaHQnLCAnNDBweCcpO1xyXG4gICAgICAgICAgICBzZWxmLnNtc0NhcHRjaGEudGV4dCgn5Y+R6YCB6aqM6K+B56CBJyk7XHJcbiAgICAgICAgICAgIHNlbGYubGlzdGVuU2VuZG1zZ0V2ZW50KCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSwgMTAwMCk7XHJcbn07XHJcblxyXG5BdXRoLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbigpe1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgc2VsZi5saXN0ZW5TaG93SGlkZUV2ZW50KCk7XHJcbiAgICBzZWxmLmxpc3RlblNjcm9sbEV2ZW50KCk7XHJcbiAgICBzZWxmLmxpc3RlblNpZ25pbkV2ZW50KCk7XHJcbiAgICBzZWxmLmxpc3RlbkltZ2NhcHRjaGFFdmVudCgpO1xyXG4gICAgc2VsZi5saXN0ZW5TZW5kbXNnRXZlbnQoKTtcclxuICAgIHNlbGYubGlzdGVuU2lnbnVwRXZlbnQoKTtcclxufTtcclxuXHJcblxyXG4vLzIu5Liq5Lq65L+h5oGv5LiL5ouJ5p2hXHJcbmZ1bmN0aW9uIFVzZXIoKXtcclxuXHJcbn1cclxuXHJcblVzZXIucHJvdG90eXBlLmxpc3RlbkhvdmVyRXZlbnQgPSBmdW5jdGlvbigpe1xyXG4gICAgdmFyIGF1dGhCb3ggPSAkKCcuYXV0aC1ib3gnKTtcclxuICAgIHZhciB1c2VyTW9yZUJveCA9ICQoJy51c2VyLW1vcmUtYm94Jyk7XHJcbiAgICBhdXRoQm94LmhvdmVyKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB1c2VyTW9yZUJveC5zaG93KCk7XHJcbiAgICB9LCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdXNlck1vcmVCb3guaGlkZSgpO1xyXG4gICAgfSlcclxufTtcclxuXHJcblVzZXIucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uKCl7XHJcbiAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gIHNlbGYubGlzdGVuSG92ZXJFdmVudCgpO1xyXG59O1xyXG5cclxuXHJcbiQoZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIGF1dGggPSBuZXcgQXV0aCgpO1xyXG4gICAgYXV0aC5ydW4oKTtcclxuICAgIHZhciB1c2VyID0gbmV3IFVzZXIoKTtcclxuICAgIHVzZXIucnVuKCk7XHJcbn0pO1xyXG5cclxuLy/kv67mlLnml7bpl7TnmoTov4fmu6TlmahcclxuJChmdW5jdGlvbiAoKSB7XHJcbiAgICBpZih0ZW1wbGF0ZSl7XHJcbiAgICAgICAgdGVtcGxhdGUuZGVmYXVsdHMuaW1wb3J0cy50aW1lU2luY2UgPSBmdW5jdGlvbiAoZGF0ZVZhbHVlKSB7XHJcbiAgICAgICAgdmFyIGRhdGUgPSBuZXcgRGF0ZShkYXRlVmFsdWUpO1xyXG4gICAgICAgIHZhciBkYXRldHMgPSBkYXRlLmdldFRpbWUoKTsgICAvLyDov5Tlm57mr6vnp5JcclxuICAgICAgICB2YXIgbm93dHMgPSAobmV3IERhdGUoKSkuZ2V0VGltZSgpO1xyXG4gICAgICAgIHZhciB0aW1lc3RhbXAgPSAobm93dHMgLSBkYXRldHMpLzEwMDA7XHJcbiAgICAgICAgaWYodGltZXN0YW1wIDwgNjApe1xyXG4gICAgICAgICAgICByZXR1cm4gJ+WImuWImidcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZig2MCA8PSB0aW1lc3RhbXAgJiYgdGltZXN0YW1wIDwgNjAqNjApe1xyXG4gICAgICAgICAgICBtaW51dGVzID0gcGFyc2VJbnQodGltZXN0YW1wLzYwKTtcclxuICAgICAgICAgICAgcmV0dXJuIG1pbnV0ZXMrJ+WIhumSn+WJjSdcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZig2MCo2MCA8PSB0aW1lc3RhbXAgJiYgdGltZXN0YW1wIDwgNjAqNjAqMjQpe1xyXG4gICAgICAgICAgICBob3VycyA9IHBhcnNlSW50KHRpbWVzdGFtcC82MC82MCk7XHJcbiAgICAgICAgICAgIHJldHVybiBob3Vycysn5bCP5pe25YmNJztcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoNjAqNjAqMjQgPD0gdGltZXN0YW1wICYmIHRpbWVzdGFtcCA8IDYwKjYwKjI0KjMwKXtcclxuICAgICAgICAgICAgZGF5cyA9IHBhcnNlSW50KHRpbWVzdGFtcC82MC82MC8yNCk7XHJcbiAgICAgICAgICAgIHJldHVybiBkYXlzKyflpKnliY0nO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNle1xyXG4gICAgICAgICAgICB2YXIgeWVhciA9IGRhdGUuZ2V0RnVsbFllYXIoKTtcclxuICAgICAgICAgICAgdmFyIG1vbnRoID0gZGF0ZS5nZXRNb250aCgpO1xyXG4gICAgICAgICAgICB2YXIgZGF5ID0gZGF0ZS5nZXREYXkoKTtcclxuICAgICAgICAgICAgdmFyIGhvdXIgPSBkYXRlLmdldEhvdXJzKCk7XHJcbiAgICAgICAgICAgIHZhciBtaW51dGUgPSBkYXRlLmdldE1pbnV0ZXMoKTtcclxuICAgICAgICAgICAgcmV0dXJuIHllYXIrJy8nK21vbnRoKycvJytkYXkrJyAnK2hvdXIrJzonK21pbnV0ZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICB9XHJcbn0pOyJdfQ==
