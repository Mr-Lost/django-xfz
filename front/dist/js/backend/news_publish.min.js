function News(){}News.prototype.listenUploadThumbnailEvent=function(){var n=$("#thumbnail-btn");n.change(function(){var e=n[0].files[0],t=new FormData;t.append("file",e),t.append("folder","news"),xfzajax.post({url:"/backend/upload_file/",data:t,processData:!1,contentType:!1,success:function(e){if(200===e.code){var t=e.data.url;$("#news_thumbnail").val(t)}}})})},News.prototype.initUeditor=function(){window.ue=UE.getEditor("editor",{initialFrameHeight:400,serverUrl:"/ueditor/upload/",autoHeightEnabled:!1})},News.prototype.listenSubmitEvent=function(){var r=$("#submit-btn");r.click(function(e){e.preventDefault();var t=$("input[name='news_title']").val(),n=$("select[name='news_category']").val(),a=$("input[name='news_description']").val(),i=$("input[name='news_thumbnail']").val(),o=window.ue.getContent(),s="",l="",u="",c=r.attr("data-news-id");c?(s="/backend/news_edit/",l="新闻修改成功！",u="/backend/news_list/"):(s="/backend/news_publish/",l="新闻发表成功！"),xfzajax.post({url:s,data:{title:t,category_id:n,desc:a,thumbnail:i,content:o,pk:c},success:function(e){200===e.code&&xfzalert.alertSuccess(l,function(){window.location.replace(u)})}})})},News.prototype.run=function(){var e=this;e.initUeditor(),e.listenUploadThumbnailEvent(),e.listenSubmitEvent()},$(function(){(new News).run()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImJhY2tlbmQvbmV3c19wdWJsaXNoLmpzIl0sIm5hbWVzIjpbIk5ld3MiLCJwcm90b3R5cGUiLCJsaXN0ZW5VcGxvYWRUaHVtYm5haWxFdmVudCIsInRodW1ibmFpbEJ0biIsIiQiLCJjaGFuZ2UiLCJmaWxlIiwiZmlsZXMiLCJmb3JtRGF0YSIsIkZvcm1EYXRhIiwiYXBwZW5kIiwieGZ6YWpheCIsInBvc3QiLCJ1cmwiLCJkYXRhIiwicHJvY2Vzc0RhdGEiLCJjb250ZW50VHlwZSIsInN1Y2Nlc3MiLCJyZXN1bHQiLCJ2YWwiLCJpbml0VWVkaXRvciIsIndpbmRvdyIsInVlIiwiVUUiLCJnZXRFZGl0b3IiLCJpbml0aWFsRnJhbWVIZWlnaHQiLCJzZXJ2ZXJVcmwiLCJhdXRvSGVpZ2h0RW5hYmxlZCIsImxpc3RlblN1Ym1pdEV2ZW50Iiwic3VibWl0QnRuIiwiY2xpY2siLCJldmVudCIsInByZXZlbnREZWZhdWx0IiwidGl0bGUiLCJjYXRlZ29yeV9pZCIsImRlc2MiLCJ0aHVtYm5haWwiLCJjb250ZW50IiwiZ2V0Q29udGVudCIsIm1zZyIsInVybDEiLCJuZXdzSWQiLCJhdHRyIiwicGsiLCJ4ZnphbGVydCIsImFsZXJ0U3VjY2VzcyIsImxvY2F0aW9uIiwicmVwbGFjZSIsInJ1biIsInNlbGYiLCJ0aGlzIl0sIm1hcHBpbmdzIjoiQUFBQSxTQUFTQSxRQUlUQSxLQUFLQyxVQUFVQywyQkFBNkIsV0FDeEMsSUFBSUMsRUFBZUMsRUFBRSxrQkFDckJELEVBQWFFLE9BQU8sV0FDaEIsSUFBSUMsRUFBT0gsRUFBYSxHQUFHSSxNQUFNLEdBQzdCQyxFQUFXLElBQUlDLFNBQ25CRCxFQUFTRSxPQUFPLE9BQVFKLEdBQ3hCRSxFQUFTRSxPQUFPLFNBQVUsUUFDMUJDLFFBQVFDLEtBQUssQ0FDVEMsSUFBTyx3QkFDUEMsS0FBUU4sRUFDUk8sYUFBZSxFQUNmQyxhQUFlLEVBQ2ZDLFFBQVcsU0FBVUMsR0FDakIsR0FBc0IsTUFBbkJBLEVBQWEsS0FBVSxDQUN0QixJQUFJTCxFQUFNSyxFQUFhLEtBQU8sSUFDVGQsRUFBRSxtQkFDUmUsSUFBSU4sVUFPdkNiLEtBQUtDLFVBQVVtQixZQUFjLFdBQzNCQyxPQUFPQyxHQUFLQyxHQUFHQyxVQUFVLFNBQVUsQ0FDL0JDLG1CQUFzQixJQUN0QkMsVUFBYSxtQkFDYkMsbUJBQW1CLEtBSXpCM0IsS0FBS0MsVUFBVTJCLGtCQUFvQixXQUNqQyxJQUFJQyxFQUFZekIsRUFBRSxlQUNsQnlCLEVBQVVDLE1BQU0sU0FBVUMsR0FDdEJBLEVBQU1DLGlCQUNOLElBQUlDLEVBQVE3QixFQUFFLDRCQUE0QmUsTUFDdENlLEVBQWM5QixFQUFFLGdDQUFnQ2UsTUFDaERnQixFQUFPL0IsRUFBRSxrQ0FBa0NlLE1BQzNDaUIsRUFBWWhDLEVBQUUsZ0NBQWdDZSxNQUM5Q2tCLEVBQVVoQixPQUFPQyxHQUFHZ0IsYUFFcEJ6QixFQUFNLEdBQ04wQixFQUFNLEdBQ05DLEVBQU8sR0FDUEMsRUFBU1osRUFBVWEsS0FBSyxnQkFDekJELEdBQ0M1QixFQUFNLHNCQUNOMEIsRUFBTSxVQUNOQyxFQUFPLHdCQUdQM0IsRUFBTSx5QkFDTjBCLEVBQU0sV0FHVjVCLFFBQVFDLEtBQUssQ0FDVEMsSUFBT0EsRUFDUEMsS0FBUSxDQUNKbUIsTUFBU0EsRUFDVEMsWUFBZUEsRUFDZkMsS0FBUUEsRUFDUkMsVUFBYUEsRUFDYkMsUUFBV0EsRUFDWE0sR0FBTUYsR0FFVnhCLFFBQVcsU0FBVUMsR0FDSyxNQUFuQkEsRUFBYSxNQUNaMEIsU0FBU0MsYUFBYU4sRUFBSyxXQUN2QmxCLE9BQU95QixTQUFTQyxRQUFRUCxXQVE5Q3hDLEtBQUtDLFVBQVUrQyxJQUFNLFdBQ2pCLElBQUlDLEVBQU9DLEtBQ1hELEVBQUs3QixjQUNMNkIsRUFBSy9DLDZCQUNMK0MsRUFBS3JCLHFCQUdUeEIsRUFBRSxZQUNhLElBQUlKLE1BQ1ZnRCIsImZpbGUiOiJiYWNrZW5kL25ld3NfcHVibGlzaC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJmdW5jdGlvbiBOZXdzKCkge1xyXG5cclxufVxyXG5cclxuTmV3cy5wcm90b3R5cGUubGlzdGVuVXBsb2FkVGh1bWJuYWlsRXZlbnQgPSBmdW5jdGlvbigpe1xyXG4gICAgdmFyIHRodW1ibmFpbEJ0biA9ICQoJyN0aHVtYm5haWwtYnRuJyk7XHJcbiAgICB0aHVtYm5haWxCdG4uY2hhbmdlKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgZmlsZSA9IHRodW1ibmFpbEJ0blswXS5maWxlc1swXTtcclxuICAgICAgICB2YXIgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKTtcclxuICAgICAgICBmb3JtRGF0YS5hcHBlbmQoJ2ZpbGUnLCBmaWxlKTtcclxuICAgICAgICBmb3JtRGF0YS5hcHBlbmQoJ2ZvbGRlcicsICduZXdzJyk7XHJcbiAgICAgICAgeGZ6YWpheC5wb3N0KHtcclxuICAgICAgICAgICAgJ3VybCc6ICcvYmFja2VuZC91cGxvYWRfZmlsZS8nLFxyXG4gICAgICAgICAgICAnZGF0YSc6IGZvcm1EYXRhLFxyXG4gICAgICAgICAgICAncHJvY2Vzc0RhdGEnOiBmYWxzZSxcclxuICAgICAgICAgICAgJ2NvbnRlbnRUeXBlJzogZmFsc2UsXHJcbiAgICAgICAgICAgICdzdWNjZXNzJzogZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgaWYocmVzdWx0Wydjb2RlJ10gPT09IDIwMCl7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHVybCA9IHJlc3VsdFsnZGF0YSddWyd1cmwnXTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdGh1bWJuYWlsSW5wdXQgPSAkKCcjbmV3c190aHVtYm5haWwnKTtcclxuICAgICAgICAgICAgICAgICAgICB0aHVtYm5haWxJbnB1dC52YWwodXJsKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICB9KVxyXG59O1xyXG5cclxuTmV3cy5wcm90b3R5cGUuaW5pdFVlZGl0b3IgPSBmdW5jdGlvbigpe1xyXG4gIHdpbmRvdy51ZSA9IFVFLmdldEVkaXRvcignZWRpdG9yJywge1xyXG4gICAgICAnaW5pdGlhbEZyYW1lSGVpZ2h0JzogNDAwLFxyXG4gICAgICAnc2VydmVyVXJsJzogJy91ZWRpdG9yL3VwbG9hZC8nLFxyXG4gICAgICBhdXRvSGVpZ2h0RW5hYmxlZDogZmFsc2UsXHJcbiAgfSlcclxufTtcclxuXHJcbk5ld3MucHJvdG90eXBlLmxpc3RlblN1Ym1pdEV2ZW50ID0gZnVuY3Rpb24oKXtcclxuICB2YXIgc3VibWl0QnRuID0gJCgnI3N1Ym1pdC1idG4nKTtcclxuICBzdWJtaXRCdG4uY2xpY2soZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIHZhciB0aXRsZSA9ICQoXCJpbnB1dFtuYW1lPSduZXdzX3RpdGxlJ11cIikudmFsKCk7XHJcbiAgICAgIHZhciBjYXRlZ29yeV9pZCA9ICQoXCJzZWxlY3RbbmFtZT0nbmV3c19jYXRlZ29yeSddXCIpLnZhbCgpO1xyXG4gICAgICB2YXIgZGVzYyA9ICQoXCJpbnB1dFtuYW1lPSduZXdzX2Rlc2NyaXB0aW9uJ11cIikudmFsKCk7XHJcbiAgICAgIHZhciB0aHVtYm5haWwgPSAkKFwiaW5wdXRbbmFtZT0nbmV3c190aHVtYm5haWwnXVwiKS52YWwoKTtcclxuICAgICAgdmFyIGNvbnRlbnQgPSB3aW5kb3cudWUuZ2V0Q29udGVudCgpO1xyXG5cclxuICAgICAgdmFyIHVybCA9ICcnO1xyXG4gICAgICB2YXIgbXNnID0gJyc7XHJcbiAgICAgIHZhciB1cmwxID0gJyc7XHJcbiAgICAgIHZhciBuZXdzSWQgPSBzdWJtaXRCdG4uYXR0cignZGF0YS1uZXdzLWlkJyk7XHJcbiAgICAgIGlmKG5ld3NJZCl7XHJcbiAgICAgICAgICB1cmwgPSAnL2JhY2tlbmQvbmV3c19lZGl0Lyc7XHJcbiAgICAgICAgICBtc2cgPSAn5paw6Ze75L+u5pS55oiQ5Yqf77yBJztcclxuICAgICAgICAgIHVybDEgPSAnL2JhY2tlbmQvbmV3c19saXN0Lyc7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZXtcclxuICAgICAgICAgIHVybCA9ICcvYmFja2VuZC9uZXdzX3B1Ymxpc2gvJztcclxuICAgICAgICAgIG1zZyA9ICfmlrDpl7vlj5HooajmiJDlip/vvIEnO1xyXG4gICAgICB9XHJcblxyXG4gICAgICB4ZnphamF4LnBvc3Qoe1xyXG4gICAgICAgICAgJ3VybCc6IHVybCxcclxuICAgICAgICAgICdkYXRhJzoge1xyXG4gICAgICAgICAgICAgICd0aXRsZSc6IHRpdGxlLFxyXG4gICAgICAgICAgICAgICdjYXRlZ29yeV9pZCc6IGNhdGVnb3J5X2lkLFxyXG4gICAgICAgICAgICAgICdkZXNjJzogZGVzYyxcclxuICAgICAgICAgICAgICAndGh1bWJuYWlsJzogdGh1bWJuYWlsLFxyXG4gICAgICAgICAgICAgICdjb250ZW50JzogY29udGVudCxcclxuICAgICAgICAgICAgICAncGsnOiBuZXdzSWRcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICAnc3VjY2Vzcyc6IGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICBpZihyZXN1bHRbJ2NvZGUnXSA9PT0gMjAwKXtcclxuICAgICAgICAgICAgICAgICAgeGZ6YWxlcnQuYWxlcnRTdWNjZXNzKG1zZywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlcGxhY2UodXJsMSk7XHJcbiAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICB9KVxyXG4gIH0pXHJcbn07XHJcblxyXG5OZXdzLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICBzZWxmLmluaXRVZWRpdG9yKCk7XHJcbiAgICBzZWxmLmxpc3RlblVwbG9hZFRodW1ibmFpbEV2ZW50KCk7XHJcbiAgICBzZWxmLmxpc3RlblN1Ym1pdEV2ZW50KCk7XHJcbn07XHJcblxyXG4kKGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBuZXdzID0gbmV3IE5ld3MoKTtcclxuICAgIG5ld3MucnVuKCk7XHJcbn0pO1xyXG4iXX0=
