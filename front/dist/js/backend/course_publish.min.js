function Course(){}Course.prototype.listenSubmitEvent=function(){$("#submit-btn").click(function(e){e.preventDefault();var o=$("input[name='course_title']").val(),t=$("select[name='course_category']").val(),r=$("select[name='teacher']").val(),n=$("input[name='video_url']").val(),a=$("input[name='cover_url']").val(),i=$("input[name='price']").val(),s=$("input[name='duration']").val(),u=window.ue.getContent();xfzajax.post({url:"/backend/course_publish/",data:{title:o,category_id:t,teacher_id:r,video_url:n,cover_url:a,price:i,duration:s,profile:u},success:function(e){200===e.code&&xfzalert.alertSuccess("课程发布成功！",function(){window.location.reload()})}})})},Course.prototype.ueditorInit=function(){window.ue=UE.getEditor("editor",{initialFrameHeight:200,serverUrl:"/ueditor/upload/",autoHeightEnabled:!1})},Course.prototype.listenUploadVideoEvent=function(){var r=this,n=$("#upload_video");n.change(function(){var e=n[0].files[0];if(e){var o=new FormData;o.append("file",e),o.append("folder","course");var t=new XMLHttpRequest;t.open("POST","/backend/upload_file/",!0),t.upload&&t.upload.addEventListener("progress",r.handleProgressEvent,!1),t.send(o),xfzajax.post({url:"/backend/upload_file/",data:o,processData:!1,contentType:!1,success:function(e){if(200===e.code){var o=e.data.url;$("#video_url").val(o)}}})}})},Course.prototype.handleProgressEvent=function(e){var o=e.total,t=(e.loaded/o*100).toFixed(0)+"%",r=$("#progress-group");r.show();var n=$(".progress-bar");n.css({width:t}),n.text(t),"100%"==t&&setTimeout(function(){r.hide(),n.css({width:0}),n.text("0%")},500)},Course.prototype.listenUploadCoverEvent=function(){$("#upload_cover").change(function(){var e=this.files[0];if(e){var o=new FormData;o.append("file",e),o.append("folder","course"),xfzajax.post({url:"/backend/upload_file/",data:o,processData:!1,contentType:!1,success:function(e){if(200===e.code){var o=e.data.url;$("#cover_url").val(o)}}})}})},Course.prototype.listenFileUploadProcess=function(e){console.log(e);var o=e.total.percent.toFixed(0)+"%";$("#progress-group").show();var t=$(".progress-bar");t.css({width:o}),t.text(o)},Course.prototype.listenFileUploadError=function(e){window.messageBox.showError(e.message)},Course.prototype.listenFileUploadComplete=function(e){$("#progress-group").hide();var o=$(".progress-bar");o.css({width:0}),o.text("0%")},Course.prototype.run=function(){var e=this;e.ueditorInit(),e.listenSubmitEvent(),e.listenUploadVideoEvent(),e.listenUploadCoverEvent()},$(function(){(new Course).run()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImJhY2tlbmQvY291cnNlX3B1Ymxpc2guanMiXSwibmFtZXMiOlsiQ291cnNlIiwicHJvdG90eXBlIiwibGlzdGVuU3VibWl0RXZlbnQiLCIkIiwiY2xpY2siLCJldmVudCIsInByZXZlbnREZWZhdWx0IiwidGl0bGUiLCJ2YWwiLCJjYXRlZ29yeV9pZCIsInRlYWNoZXJfaWQiLCJ2aWRlb191cmwiLCJjb3Zlcl91cmwiLCJwcmljZSIsImR1cmF0aW9uIiwicHJvZmlsZSIsIndpbmRvdyIsInVlIiwiZ2V0Q29udGVudCIsInhmemFqYXgiLCJwb3N0IiwidXJsIiwiZGF0YSIsInN1Y2Nlc3MiLCJyZXN1bHQiLCJ4ZnphbGVydCIsImFsZXJ0U3VjY2VzcyIsImxvY2F0aW9uIiwicmVsb2FkIiwidWVkaXRvckluaXQiLCJVRSIsImdldEVkaXRvciIsImluaXRpYWxGcmFtZUhlaWdodCIsInNlcnZlclVybCIsImF1dG9IZWlnaHRFbmFibGVkIiwibGlzdGVuVXBsb2FkVmlkZW9FdmVudCIsInNlbGYiLCJ0aGlzIiwidmlkZW9VcGxvYWRCdG4iLCJjaGFuZ2UiLCJmaWxlIiwiZmlsZXMiLCJmb3JtRGF0YSIsIkZvcm1EYXRhIiwiYXBwZW5kIiwieGhyIiwiWE1MSHR0cFJlcXVlc3QiLCJvcGVuIiwidXBsb2FkIiwiYWRkRXZlbnRMaXN0ZW5lciIsImhhbmRsZVByb2dyZXNzRXZlbnQiLCJzZW5kIiwicHJvY2Vzc0RhdGEiLCJjb250ZW50VHlwZSIsInRvdGFsIiwicGVyY2VudFRleHQiLCJsb2FkZWQiLCJ0b0ZpeGVkIiwicHJvZ3Jlc3NHcm91cCIsInNob3ciLCJwcm9ncmVzc0JhciIsImNzcyIsIndpZHRoIiwidGV4dCIsInNldFRpbWVvdXQiLCJoaWRlIiwibGlzdGVuVXBsb2FkQ292ZXJFdmVudCIsImxpc3RlbkZpbGVVcGxvYWRQcm9jZXNzIiwicmVzcG9uc2UiLCJjb25zb2xlIiwibG9nIiwicGVyY2VudCIsImxpc3RlbkZpbGVVcGxvYWRFcnJvciIsImVycm9yIiwibWVzc2FnZUJveCIsInNob3dFcnJvciIsIm1lc3NhZ2UiLCJsaXN0ZW5GaWxlVXBsb2FkQ29tcGxldGUiLCJydW4iXSwibWFwcGluZ3MiOiJBQUFBLFNBQVNBLFVBSVRBLE9BQU9DLFVBQVVDLGtCQUFvQixXQUNqQkMsRUFBRSxlQUNSQyxNQUFNLFNBQVVDLEdBQ3RCQSxFQUFNQyxpQkFDTixJQUFJQyxFQUFRSixFQUFFLDhCQUE4QkssTUFDeENDLEVBQWNOLEVBQUUsa0NBQWtDSyxNQUNsREUsRUFBYVAsRUFBRSwwQkFBMEJLLE1BQ3pDRyxFQUFZUixFQUFFLDJCQUEyQkssTUFDekNJLEVBQVlULEVBQUUsMkJBQTJCSyxNQUN6Q0ssRUFBUVYsRUFBRSx1QkFBdUJLLE1BQ2pDTSxFQUFXWCxFQUFFLDBCQUEwQkssTUFDdkNPLEVBQVVDLE9BQU9DLEdBQUdDLGFBRXhCQyxRQUFRQyxLQUFLLENBQ1RDLElBQU8sMkJBQ1BDLEtBQVEsQ0FDSmYsTUFBU0EsRUFDVEUsWUFBZUEsRUFDZkMsV0FBY0EsRUFDZEMsVUFBYUEsRUFDYkMsVUFBYUEsRUFDYkMsTUFBU0EsRUFDVEMsU0FBWUEsRUFDWkMsUUFBV0EsR0FFZlEsUUFBVyxTQUFVQyxHQUNLLE1BQW5CQSxFQUFhLE1BQ1pDLFNBQVNDLGFBQWEsVUFBVyxXQUM3QlYsT0FBT1csU0FBU0MsaUJBUXhDNUIsT0FBT0MsVUFBVTRCLFlBQWMsV0FDM0JiLE9BQU9DLEdBQUthLEdBQUdDLFVBQVUsU0FBVSxDQUMvQkMsbUJBQXNCLElBQ3RCQyxVQUFhLG1CQUNiQyxtQkFBbUIsS0FJM0JsQyxPQUFPQyxVQUFVa0MsdUJBQXlCLFdBQ3hDLElBQUlDLEVBQU9DLEtBQ1BDLEVBQWlCbkMsRUFBRSxpQkFDdkJtQyxFQUFlQyxPQUFPLFdBQ2xCLElBQUlDLEVBQU9GLEVBQWUsR0FBR0csTUFBTSxHQUNuQyxHQUFHRCxFQUFLLENBQ0osSUFBSUUsRUFBVyxJQUFJQyxTQUNuQkQsRUFBU0UsT0FBTyxPQUFRSixHQUN4QkUsRUFBU0UsT0FBTyxTQUFVLFVBRTFCLElBQUlDLEVBQU0sSUFBSUMsZUFFZEQsRUFBSUUsS0FBSyxPQUFRLHlCQUF5QixHQUV2Q0YsRUFBSUcsUUFFSEgsRUFBSUcsT0FBT0MsaUJBQWlCLFdBQVliLEVBQUtjLHFCQUFxQixHQUd0RUwsRUFBSU0sS0FBS1QsR0FDVHZCLFFBQVFDLEtBQUssQ0FDVEMsSUFBTyx3QkFDUEMsS0FBUW9CLEVBQ1JVLGFBQWUsRUFDZkMsYUFBZSxFQUNmOUIsUUFBVyxTQUFVQyxHQUNqQixHQUFzQixNQUFuQkEsRUFBYSxLQUFVLENBQ3RCLElBQUlILEVBQU1HLEVBQWEsS0FBTyxJQUNickIsRUFBRSxjQUNSSyxJQUFJYSxXQVNyQ3JCLE9BQU9DLFVBQVVpRCxvQkFBc0IsU0FBUzdDLEdBQzVDLElBQUlpRCxFQUFRakQsRUFBTWlELE1BRWRDLEdBRFNsRCxFQUFNbUQsT0FDUUYsRUFBTyxLQUFLRyxRQUFRLEdBQUcsSUFDOUNDLEVBQWdCdkQsRUFBRSxtQkFDdEJ1RCxFQUFjQyxPQUNkLElBQUlDLEVBQWN6RCxFQUFFLGlCQUNwQnlELEVBQVlDLElBQUksQ0FBQ0MsTUFBU1AsSUFDMUJLLEVBQVlHLEtBQUtSLEdBQ0UsUUFBaEJBLEdBQ0NTLFdBQVcsV0FDUE4sRUFBY08sT0FDZEwsRUFBWUMsSUFBSSxDQUFDQyxNQUFTLElBQzFCRixFQUFZRyxLQUFLLE9BQ2xCLE1BSVgvRCxPQUFPQyxVQUFVaUUsdUJBQXlCLFdBQ2pCL0QsRUFBRSxpQkFDUm9DLE9BQU8sV0FDbEIsSUFBSUMsRUFBT0gsS0FBS0ksTUFBTSxHQUN0QixHQUFHRCxFQUFLLENBQ0osSUFBSUUsRUFBVyxJQUFJQyxTQUNuQkQsRUFBU0UsT0FBTyxPQUFRSixHQUN4QkUsRUFBU0UsT0FBTyxTQUFVLFVBQzFCekIsUUFBUUMsS0FBSyxDQUNUQyxJQUFPLHdCQUNQQyxLQUFRb0IsRUFDUlUsYUFBZSxFQUNmQyxhQUFlLEVBQ2Y5QixRQUFXLFNBQVVDLEdBQ2pCLEdBQXNCLE1BQW5CQSxFQUFhLEtBQVUsQ0FDdEIsSUFBSUgsRUFBTUcsRUFBYSxLQUFPLElBQ2JyQixFQUFFLGNBQ1JLLElBQUlhLFdBU3ZDckIsT0FBT0MsVUFBVWtFLHdCQUEwQixTQUFTQyxHQUNoREMsUUFBUUMsSUFBSUYsR0FDWixJQUVJYixFQUZRYSxFQUFTZCxNQUNEaUIsUUFDTWQsUUFBUSxHQUFHLElBQ2pCdEQsRUFBRSxtQkFDUndELE9BQ2QsSUFBSUMsRUFBY3pELEVBQUUsaUJBQ3BCeUQsRUFBWUMsSUFBSSxDQUFDQyxNQUFTUCxJQUMxQkssRUFBWUcsS0FBS1IsSUFHckJ2RCxPQUFPQyxVQUFVdUUsc0JBQXdCLFNBQVNDLEdBQ2hEekQsT0FBTzBELFdBQVdDLFVBQVVGLEVBQU1HLFVBR3BDNUUsT0FBT0MsVUFBVTRFLHlCQUEyQixTQUFTVCxHQUM3QmpFLEVBQUUsbUJBQ1I4RCxPQUNkLElBQUlMLEVBQWN6RCxFQUFFLGlCQUNwQnlELEVBQVlDLElBQUksQ0FBQ0MsTUFBUyxJQUMxQkYsRUFBWUcsS0FBSyxPQUlyQi9ELE9BQU9DLFVBQVU2RSxJQUFNLFdBQ25CLElBQUkxQyxFQUFPQyxLQUNYRCxFQUFLUCxjQUNMTyxFQUFLbEMsb0JBQ0xrQyxFQUFLRCx5QkFJTEMsRUFBSzhCLDBCQUdUL0QsRUFBRSxZQUNlLElBQUlILFFBQ1Y4RSIsImZpbGUiOiJiYWNrZW5kL2NvdXJzZV9wdWJsaXNoLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIENvdXJzZSgpIHtcclxuXHJcbn1cclxuXHJcbkNvdXJzZS5wcm90b3R5cGUubGlzdGVuU3VibWl0RXZlbnQgPSBmdW5jdGlvbigpe1xyXG4gICAgdmFyIHN1Ym1pdEJ0biA9ICQoJyNzdWJtaXQtYnRuJyk7XHJcbiAgICBzdWJtaXRCdG4uY2xpY2soZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICB2YXIgdGl0bGUgPSAkKFwiaW5wdXRbbmFtZT0nY291cnNlX3RpdGxlJ11cIikudmFsKCk7XHJcbiAgICAgICAgdmFyIGNhdGVnb3J5X2lkID0gJChcInNlbGVjdFtuYW1lPSdjb3Vyc2VfY2F0ZWdvcnknXVwiKS52YWwoKTtcclxuICAgICAgICB2YXIgdGVhY2hlcl9pZCA9ICQoXCJzZWxlY3RbbmFtZT0ndGVhY2hlciddXCIpLnZhbCgpO1xyXG4gICAgICAgIHZhciB2aWRlb191cmwgPSAkKFwiaW5wdXRbbmFtZT0ndmlkZW9fdXJsJ11cIikudmFsKCk7XHJcbiAgICAgICAgdmFyIGNvdmVyX3VybCA9ICQoXCJpbnB1dFtuYW1lPSdjb3Zlcl91cmwnXVwiKS52YWwoKTtcclxuICAgICAgICB2YXIgcHJpY2UgPSAkKFwiaW5wdXRbbmFtZT0ncHJpY2UnXVwiKS52YWwoKTtcclxuICAgICAgICB2YXIgZHVyYXRpb24gPSAkKFwiaW5wdXRbbmFtZT0nZHVyYXRpb24nXVwiKS52YWwoKTtcclxuICAgICAgICB2YXIgcHJvZmlsZSA9IHdpbmRvdy51ZS5nZXRDb250ZW50KCk7XHJcblxyXG4gICAgICAgIHhmemFqYXgucG9zdCh7XHJcbiAgICAgICAgICAgICd1cmwnOiAnL2JhY2tlbmQvY291cnNlX3B1Ymxpc2gvJyxcclxuICAgICAgICAgICAgJ2RhdGEnOiB7XHJcbiAgICAgICAgICAgICAgICAndGl0bGUnOiB0aXRsZSxcclxuICAgICAgICAgICAgICAgICdjYXRlZ29yeV9pZCc6IGNhdGVnb3J5X2lkLFxyXG4gICAgICAgICAgICAgICAgJ3RlYWNoZXJfaWQnOiB0ZWFjaGVyX2lkLFxyXG4gICAgICAgICAgICAgICAgJ3ZpZGVvX3VybCc6IHZpZGVvX3VybCxcclxuICAgICAgICAgICAgICAgICdjb3Zlcl91cmwnOiBjb3Zlcl91cmwsXHJcbiAgICAgICAgICAgICAgICAncHJpY2UnOiBwcmljZSxcclxuICAgICAgICAgICAgICAgICdkdXJhdGlvbic6IGR1cmF0aW9uLFxyXG4gICAgICAgICAgICAgICAgJ3Byb2ZpbGUnOiBwcm9maWxlLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAnc3VjY2Vzcyc6IGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgIGlmKHJlc3VsdFsnY29kZSddID09PSAyMDApe1xyXG4gICAgICAgICAgICAgICAgICAgIHhmemFsZXJ0LmFsZXJ0U3VjY2Vzcygn6K++56iL5Y+R5biD5oiQ5Yqf77yBJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICB9KVxyXG59O1xyXG5cclxuQ291cnNlLnByb3RvdHlwZS51ZWRpdG9ySW5pdCA9IGZ1bmN0aW9uKCl7XHJcbiAgICB3aW5kb3cudWUgPSBVRS5nZXRFZGl0b3IoJ2VkaXRvcicsIHtcclxuICAgICAgICAnaW5pdGlhbEZyYW1lSGVpZ2h0JzogMjAwLFxyXG4gICAgICAgICdzZXJ2ZXJVcmwnOiAnL3VlZGl0b3IvdXBsb2FkLycsXHJcbiAgICAgICAgYXV0b0hlaWdodEVuYWJsZWQ6IGZhbHNlLFxyXG4gIH0pXHJcbn07XHJcblxyXG5Db3Vyc2UucHJvdG90eXBlLmxpc3RlblVwbG9hZFZpZGVvRXZlbnQgPSBmdW5jdGlvbigpe1xyXG4gIHZhciBzZWxmID0gdGhpcztcclxuICB2YXIgdmlkZW9VcGxvYWRCdG4gPSAkKCcjdXBsb2FkX3ZpZGVvJyk7XHJcbiAgdmlkZW9VcGxvYWRCdG4uY2hhbmdlKGZ1bmN0aW9uICgpIHtcclxuICAgICAgdmFyIGZpbGUgPSB2aWRlb1VwbG9hZEJ0blswXS5maWxlc1swXTsgIC8vIOebuOW9k+S6jiB2YXIgZmlsZSA9IHRoaXMuZmlsZXNbMF07XHJcbiAgICAgIGlmKGZpbGUpe1xyXG4gICAgICAgICAgdmFyIGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCk7XHJcbiAgICAgICAgICBmb3JtRGF0YS5hcHBlbmQoJ2ZpbGUnLCBmaWxlKTtcclxuICAgICAgICAgIGZvcm1EYXRhLmFwcGVuZCgnZm9sZGVyJywgJ2NvdXJzZScpO1xyXG4gICAgICAgICAgLy8g5Yib5bu65byC5q2l5a+56LGhXHJcbiAgICAgICAgICB2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XHJcbiAgICAgICAgICAvLyDmiZPlvIDov57mjqVcclxuICAgICAgICAgIHhoci5vcGVuKCdQT1NUJywgJy9iYWNrZW5kL3VwbG9hZF9maWxlLycsIHRydWUpO1xyXG4gICAgICAgICAgLy8g55uR5ZCs5LiK5Lyg5LqL5Lu2XHJcbiAgICAgICAgICBpZih4aHIudXBsb2FkKXtcclxuICAgICAgICAgICAgICAvLyDnm5HlkKzkuIrkvKDlsZ7mgKfnmoTkuIrkvKDkuovku7bvvIzmr4/mrKHkuIrkvKDpg73miafooYzlh73mlbBzZWxmLmhhbmRsZVByb2dyZXNzRXZlbnRcclxuICAgICAgICAgICAgICB4aHIudXBsb2FkLmFkZEV2ZW50TGlzdGVuZXIoJ3Byb2dyZXNzJywgc2VsZi5oYW5kbGVQcm9ncmVzc0V2ZW50LCBmYWxzZSlcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIC8vIOaJp+ihjOS4iuS8oFxyXG4gICAgICAgICAgeGhyLnNlbmQoZm9ybURhdGEpO1xyXG4gICAgICAgICAgeGZ6YWpheC5wb3N0KHtcclxuICAgICAgICAgICAgICAndXJsJzogJy9iYWNrZW5kL3VwbG9hZF9maWxlLycsXHJcbiAgICAgICAgICAgICAgJ2RhdGEnOiBmb3JtRGF0YSxcclxuICAgICAgICAgICAgICAncHJvY2Vzc0RhdGEnOiBmYWxzZSxcclxuICAgICAgICAgICAgICAnY29udGVudFR5cGUnOiBmYWxzZSxcclxuICAgICAgICAgICAgICAnc3VjY2Vzcyc6IGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgaWYocmVzdWx0Wydjb2RlJ10gPT09IDIwMCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICB2YXIgdXJsID0gcmVzdWx0WydkYXRhJ11bJ3VybCddO1xyXG4gICAgICAgICAgICAgICAgICAgICAgdmFyIHZpZGVvSW5wdXQgPSAkKCcjdmlkZW9fdXJsJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICB2aWRlb0lucHV0LnZhbCh1cmwpO1xyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSlcclxuICAgICAgfVxyXG4gIH0pXHJcbn07XHJcblxyXG4vL+S4iuS8oOinhumikeetiei+g+Wkp+aWh+S7tuaXtuWKoOi9veS4iuS8oOi/m+W6puadoVxyXG5Db3Vyc2UucHJvdG90eXBlLmhhbmRsZVByb2dyZXNzRXZlbnQgPSBmdW5jdGlvbihldmVudCl7XHJcbiAgICB2YXIgdG90YWwgPSBldmVudC50b3RhbDsgICAvLyDojrflj5bkuIrkvKDmlofku7bmgLvlpKflsI9cclxuICAgIHZhciBsb2FkZWQgPSBldmVudC5sb2FkZWQ7ICAgLy8g6I635Y+W5bey57uP5LiK5Lyg5paH5Lu25aSn5bCPXHJcbiAgICB2YXIgcGVyY2VudFRleHQgPSAoKGxvYWRlZC90b3RhbCkqMTAwKS50b0ZpeGVkKDApKyclJzsgICAvLyDlm5voiI3kupTlhaXkv53nlZkw5L2N5bCP5pWwXHJcbiAgICB2YXIgcHJvZ3Jlc3NHcm91cCA9ICQoJyNwcm9ncmVzcy1ncm91cCcpO1xyXG4gICAgcHJvZ3Jlc3NHcm91cC5zaG93KCk7XHJcbiAgICB2YXIgcHJvZ3Jlc3NCYXIgPSAkKCcucHJvZ3Jlc3MtYmFyJyk7XHJcbiAgICBwcm9ncmVzc0Jhci5jc3Moeyd3aWR0aCc6IHBlcmNlbnRUZXh0fSk7XHJcbiAgICBwcm9ncmVzc0Jhci50ZXh0KHBlcmNlbnRUZXh0KTtcclxuICAgIGlmKHBlcmNlbnRUZXh0ID09PSAnMTAwJScpe1xyXG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBwcm9ncmVzc0dyb3VwLmhpZGUoKTtcclxuICAgICAgICAgICAgcHJvZ3Jlc3NCYXIuY3NzKHsnd2lkdGgnOiAwfSk7XHJcbiAgICAgICAgICAgIHByb2dyZXNzQmFyLnRleHQoJzAlJyk7XHJcbiAgICAgICAgfSwgNTAwKTtcclxuICAgIH1cclxufTtcclxuXHJcbkNvdXJzZS5wcm90b3R5cGUubGlzdGVuVXBsb2FkQ292ZXJFdmVudCA9IGZ1bmN0aW9uKCl7XHJcbiAgICB2YXIgY292ZXJVcGxvYWRCdG4gPSAkKCcjdXBsb2FkX2NvdmVyJyk7XHJcbiAgICBjb3ZlclVwbG9hZEJ0bi5jaGFuZ2UoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBmaWxlID0gdGhpcy5maWxlc1swXTtcclxuICAgICAgICBpZihmaWxlKXtcclxuICAgICAgICAgICAgdmFyIGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCk7XHJcbiAgICAgICAgICAgIGZvcm1EYXRhLmFwcGVuZCgnZmlsZScsIGZpbGUpO1xyXG4gICAgICAgICAgICBmb3JtRGF0YS5hcHBlbmQoJ2ZvbGRlcicsICdjb3Vyc2UnKTtcclxuICAgICAgICAgICAgeGZ6YWpheC5wb3N0KHtcclxuICAgICAgICAgICAgICAgICd1cmwnOiAnL2JhY2tlbmQvdXBsb2FkX2ZpbGUvJyxcclxuICAgICAgICAgICAgICAgICdkYXRhJzogZm9ybURhdGEsXHJcbiAgICAgICAgICAgICAgICAncHJvY2Vzc0RhdGEnOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICdjb250ZW50VHlwZSc6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgJ3N1Y2Nlc3MnOiBmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYocmVzdWx0Wydjb2RlJ10gPT09IDIwMCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB1cmwgPSByZXN1bHRbJ2RhdGEnXVsndXJsJ107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjb3ZlcklucHV0ID0gJCgnI2NvdmVyX3VybCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb3ZlcklucHV0LnZhbCh1cmwpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9XHJcbiAgICB9KVxyXG59O1xyXG5cclxuXHJcbkNvdXJzZS5wcm90b3R5cGUubGlzdGVuRmlsZVVwbG9hZFByb2Nlc3MgPSBmdW5jdGlvbihyZXNwb25zZSl7XHJcbiAgICBjb25zb2xlLmxvZyhyZXNwb25zZSk7XHJcbiAgICB2YXIgdG90YWwgPSByZXNwb25zZS50b3RhbDtcclxuICAgIHZhciBwZXJjZW50ID0gdG90YWwucGVyY2VudDtcclxuICAgIHZhciBwZXJjZW50VGV4dCA9IHBlcmNlbnQudG9GaXhlZCgwKSsnJSc7XHJcbiAgICB2YXIgcHJvZ3Jlc3NHcm91cCA9ICQoJyNwcm9ncmVzcy1ncm91cCcpO1xyXG4gICAgcHJvZ3Jlc3NHcm91cC5zaG93KCk7XHJcbiAgICB2YXIgcHJvZ3Jlc3NCYXIgPSAkKCcucHJvZ3Jlc3MtYmFyJyk7XHJcbiAgICBwcm9ncmVzc0Jhci5jc3Moeyd3aWR0aCc6IHBlcmNlbnRUZXh0fSk7XHJcbiAgICBwcm9ncmVzc0Jhci50ZXh0KHBlcmNlbnRUZXh0KTtcclxufTtcclxuXHJcbkNvdXJzZS5wcm90b3R5cGUubGlzdGVuRmlsZVVwbG9hZEVycm9yID0gZnVuY3Rpb24oZXJyb3Ipe1xyXG4gIHdpbmRvdy5tZXNzYWdlQm94LnNob3dFcnJvcihlcnJvci5tZXNzYWdlKTtcclxufTtcclxuXHJcbkNvdXJzZS5wcm90b3R5cGUubGlzdGVuRmlsZVVwbG9hZENvbXBsZXRlID0gZnVuY3Rpb24ocmVzcG9uc2Upe1xyXG4gICAgdmFyIHByb2dyZXNzR3JvdXAgPSAkKCcjcHJvZ3Jlc3MtZ3JvdXAnKTtcclxuICAgIHByb2dyZXNzR3JvdXAuaGlkZSgpO1xyXG4gICAgdmFyIHByb2dyZXNzQmFyID0gJCgnLnByb2dyZXNzLWJhcicpO1xyXG4gICAgcHJvZ3Jlc3NCYXIuY3NzKHsnd2lkdGgnOiAwfSk7XHJcbiAgICBwcm9ncmVzc0Jhci50ZXh0KCcwJScpO1xyXG5cclxufTtcclxuXHJcbkNvdXJzZS5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgc2VsZi51ZWRpdG9ySW5pdCgpO1xyXG4gICAgc2VsZi5saXN0ZW5TdWJtaXRFdmVudCgpO1xyXG4gICAgc2VsZi5saXN0ZW5VcGxvYWRWaWRlb0V2ZW50KCk7XHJcbiAgICAvLyBzZWxmLmxpc3RlbkZpbGVVcGxvYWRQcm9jZXNzKCk7XHJcbiAgICAvLyBzZWxmLmxpc3RlbkZpbGVVcGxvYWRDb21wbGV0ZSgpO1xyXG4gICAgLy8gc2VsZi5saXN0ZW5GaWxlVXBsb2FkRXJyb3IoKTtcclxuICAgIHNlbGYubGlzdGVuVXBsb2FkQ292ZXJFdmVudCgpO1xyXG59O1xyXG5cclxuJChmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgY291cnNlID0gbmV3IENvdXJzZSgpO1xyXG4gICAgY291cnNlLnJ1bigpO1xyXG59KTsiXX0=
